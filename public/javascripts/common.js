"use strict";$(function(){function a(){return Math.floor(1.42*+l["average-salary"].val())}function t(){return Math.floor(a()*+l.workers.val())}function r(){return Math.floor(t()/+l.ratio.val()*100)}function n(){return Math.floor(r()/+l.margin.val()*100)}function i(){return Math.floor(n()/+l.workdays.val()*100)}function e(a,t){var r=String(t).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ");a.attr("title",r+" ₽"),a.text(r)}function o(o){o.preventDefault(),e(s.workers,a()),e(s["average-salary"],t()),e(s.ratio,r()),e(s.margin,n()),e(s.workdays,i()),$(".calc__row--hidden").removeClass("calc__row--hidden"),$(".calc__btn").text("Пересчитать")}function c(){var a=$(".main-nav");$(window).scrollTop()>=_?(a.css("position","fixed"),a.css("top","0")):(a.css("position","absolute"),a.css("top","100%"))}AOS.init({duration:600,disable:"mobile"});for(var l={workers:$('.calc-item__input[data-calc="workers"]'),"average-salary":$('.calc-item__input[data-calc="average-salary"]'),ratio:$('.calc-item__input[data-calc="ratio"]'),margin:$('.calc-item__input[data-calc="margin"]'),workdays:$('.calc-item__input[data-calc="workdays"]')},s={workers:$('.calc-item__result[data-calc="workers"]'),"average-salary":$('.calc-item__result[data-calc="average-salary"]'),ratio:$('.calc-item__result[data-calc="ratio"]'),margin:$('.calc-item__result[data-calc="margin"]'),workdays:$('.calc-item__result[data-calc="workdays"]')},u=$(".main-nav__link"),f={0:"",1:"",2:"",3:"",4:""},d=0;d<u.length;d++)f[d]=u.eq(d).outerWidth();var _=$(".intro").offset().top;$(".calc__form").on("submit",o),c(),$(document).on("scroll",c),!function(){function a(a){a.preventDefault();var t=($(this),$(this).attr("href")),r=$(t).offset().top+10;f=!1,$("body, html").animate({scrollTop:r},1e3,function(){f=!0,i.call(null)})}function t(){d=c.offset().left,e.each(function(a,t){l[t.id]=$(t).offset().top})}function r(a){if(!a)return s.removeClass("is-active"),d;var t=$('.main-nav__link[href="#'+a+'"]');if(a===u)return n(t),"100%";var r=t.outerWidth()||0,i=t.offset().left||0,e=i+r;return n(t),e<=0?d:e}function n(a){a.addClass("is-active"),$(".main-nav__link:lt("+a.index()+")").addClass("is-active"),$(".main-nav__link:gt("+a.index()+")").removeClass("is-active")}function i(){if(f){f=!0;var a=$(window).scrollTop(),t=null;for(var n in l)l[n]<=a&&(t=n);var i=r(t);o.width(i)}}var e=$(".section[id]"),o=$(".main-nav__progress"),c=$(".main-nav__row"),l={},s=$(".main-nav__link"),u=$(".main-nav__link").last().attr("href").slice(1),f=!0,d=0;s.on("click",a),t(),i(),$(window).on("resize",$.debounce(100,t)).on("scroll",$.debounce(100,i))}()});
//# sourceMappingURL=../javascripts/common.js.map
