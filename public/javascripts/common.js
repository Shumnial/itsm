"use strict";$(function(){function a(){var a=f["average-salary"].val();return Math.floor(1.42*+a)}function t(){var t=f.workers.val();return Math.floor(a()*+t)}function e(){var a=35;return Math.floor(t()/+a*100)}function r(){var a=f.margin.val();return Math.floor(e()/+a*100)}function n(){var a=f.workdays.val();return Math.floor(r()/+a)}function i(a,t){var e=String(t).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ");a.attr("title",e+" ₽"),a.text(e)}function o(o){o.preventDefault(),i(m.workers,a()),i(m["average-salary"],t()),i(m.ratio,e()),i(m.margin,r()),i(m.workdays,n()),$(".calc__row--hidden").removeClass("calc__row--hidden"),$(".calc__note--hidden").removeClass("calc__note--hidden"),$(".calc__btn").text("Пересчитать")}function c(){var a=$(".main-nav");$(window).scrollTop()>=p?(a.css("position","fixed"),a.css("top","0")):(a.css("position","absolute"),a.css("top","100%"))}function l(a){a.preventDefault();var t=($(this),$(this).attr("href")),e=$(t).offset().top+10;b=!1,$("html").animate({scrollTop:e},1e3,function(){b=!0,_.call(null)})}function s(){var a=$(".move-up"),t=$("html").height()/3,e=$(window).scrollTop();e>=t?a.removeClass("move-up--hidden"):a.addClass("move-up--hidden")}function d(){var a=$(".main-nav").height();x=k.offset().left,h.each(function(t,e){g[e.id]=$(e).offset().top-a})}function v(a){if(!a)return y.removeClass("is-active"),x;var t=$('.main-nav__link[href="#'+a+'"]');if(a===C)return u(t),$(".move-up").addClass("is-active"),"100%";$(".move-up").removeClass("is-active");var e=t.outerWidth()||0,r=t.offset().left||0,n=r+e;return u(t),n<=0?x:n}function u(a){a.addClass("is-active"),$(".main-nav__link:lt("+a.index()+")").addClass("is-active"),$(".main-nav__link:gt("+a.index()+")").removeClass("is-active")}function _(){if(b){b=!0;var a=$(window).scrollTop(),t=null;for(var e in g)g[e]<=a&&(t=e);var r=v(t);w.width(r)}}AOS.init({duration:600,disable:"mobile"});var f={workers:$('.calc-item__input[data-calc="workers"]'),"average-salary":$('.calc-item__input[data-calc="average-salary"]'),ratio:$('.calc-item__input[data-calc="ratio"]'),margin:$('.calc-item__input[data-calc="margin"]'),workdays:$('.calc-item__input[data-calc="workdays"]')},m={workers:$('.calc-item__result[data-calc="workers"]'),"average-salary":$('.calc-item__result[data-calc="average-salary"]'),ratio:$('.calc-item__result[data-calc="ratio"]'),margin:$('.calc-item__result[data-calc="margin"]'),workdays:$('.calc-item__result[data-calc="workdays"]')},p=$(".intro").offset().top,h=$(".section[id]"),w=$(".main-nav__progress"),k=$(".main-nav__row"),g={},y=$(".main-nav__link"),C=$(".main-nav__link").last().attr("href").slice(1),b=!0,x=0;s(),d(),_(),$(".calc__form").on("submit",o),c(),$(document).on("scroll",c),y.on("click",l),$(".move-up").on("click",l),$(window).on("resize",$.debounce(100,d)).on("scroll",$.debounce(100,_)).on("scroll",$.debounce(100,s))});
//# sourceMappingURL=../javascripts/common.js.map
