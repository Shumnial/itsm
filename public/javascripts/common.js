"use strict";$(function(){function a(){var a=m["average-salary"].val();return Math.floor(1.42*+a)}function t(){var t=m.workers.val();return console.log("val: ",t),Math.floor(a()*+t)}function o(){var a=m.ratio.val();return console.log("val: ",a),Math.floor(t()/+a*100)}function r(){var a=m.margin.val();return console.log("val: ",a),Math.floor(o()/+a*100)}function e(){var a=m.workdays.val();return Math.floor(r()/+a)}function n(a,t){var o=String(t).replace(/(\d)(?=(\d{3})+([^\d]|$))/g,"$1 ");a.attr("title",o+" ₽"),a.text(o)}function i(i){i.preventDefault(),n(_.workers,a()),n(_["average-salary"],t()),n(_.ratio,o()),n(_.margin,r()),n(_.workdays,e()),$(".calc__row--hidden").removeClass("calc__row--hidden"),$(".calc__btn").text("Пересчитать")}function l(){var a=$(".main-nav");$(window).scrollTop()>=p?(a.css("position","fixed"),a.css("top","0")):(a.css("position","absolute"),a.css("top","100%"))}function c(a){a.preventDefault();var t=($(this),$(this).attr("href")),o=$(t).offset().top+10;C=!1,$("body, html").animate({scrollTop:o},1e3,function(){C=!0,f.call(null)})}function s(){var a=$(".move-up"),t=$("html").height()/3,o=$(window).scrollTop();o>=t?a.removeClass("move-up--hidden"):a.addClass("move-up--hidden")}function v(){x=g.offset().left,w.each(function(a,t){k[t.id]=$(t).offset().top})}function u(a){if(!a)return y.removeClass("is-active"),x;var t=$('.main-nav__link[href="#'+a+'"]');if(a===b)return d(t),$(".move-up").addClass("is-active"),"100%";$(".move-up").removeClass("is-active");var o=t.outerWidth()||0,r=t.offset().left||0,e=r+o;return d(t),e<=0?x:e}function d(a){a.addClass("is-active"),$(".main-nav__link:lt("+a.index()+")").addClass("is-active"),$(".main-nav__link:gt("+a.index()+")").removeClass("is-active")}function f(){if(C){C=!0;var a=$(window).scrollTop(),t=null;for(var o in k)k[o]<=a&&(t=o);var r=u(t);h.width(r)}}AOS.init({duration:600,disable:"mobile"});var m={workers:$('.calc-item__input[data-calc="workers"]'),"average-salary":$('.calc-item__input[data-calc="average-salary"]'),ratio:$('.calc-item__input[data-calc="ratio"]'),margin:$('.calc-item__input[data-calc="margin"]'),workdays:$('.calc-item__input[data-calc="workdays"]')},_={workers:$('.calc-item__result[data-calc="workers"]'),"average-salary":$('.calc-item__result[data-calc="average-salary"]'),ratio:$('.calc-item__result[data-calc="ratio"]'),margin:$('.calc-item__result[data-calc="margin"]'),workdays:$('.calc-item__result[data-calc="workdays"]')},p=$(".intro").offset().top,w=$(".section[id]"),h=$(".main-nav__progress"),g=$(".main-nav__row"),k={},y=$(".main-nav__link"),b=$(".main-nav__link").last().attr("href").slice(1),C=!0,x=0;s(),v(),f(),$(".calc__form").on("submit",i),l(),$(document).on("scroll",l),y.on("click",c),$(".move-up").on("click",c),$(window).on("resize",$.debounce(100,v)).on("scroll",$.debounce(100,f)).on("scroll",$.debounce(100,s))});
//# sourceMappingURL=../javascripts/common.js.map
